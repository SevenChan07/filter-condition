(function(e){function t(t){for(var l,a,o=t[0],c=t[1],d=t[2],f=0,s=[];f<o.length;f++)a=o[f],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&s.push(i[a][0]),i[a]=0;for(l in c)Object.prototype.hasOwnProperty.call(c,l)&&(e[l]=c[l]);u&&u(t);while(s.length)s.shift()();return r.push.apply(r,d||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],l=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(l=!1)}l&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var l={},i={app:0},r=[];function a(t){if(l[t])return l[t].exports;var n=l[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=l,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)a.d(n,l,function(t){return e[t]}.bind(null,l));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/filter-condition/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var l=n("2b0e"),i=n("5c96"),r=n.n(i),a=(n("0fae"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"flex"},attrs:{id:"app"}},[n("el-form",{staticStyle:{flex:"1"}},[n("FilterForm",{attrs:{ruleObj:e.formData},on:{addItem:e.addItem,deleteItem:e.deleteItem,addChildItem:e.addChildItem,toggleRelation:e.toggleRelation}})],1),n("div",{staticStyle:{flex:"1"}},[n("vue-json-editor",{staticStyle:{height:"600px"},attrs:{mode:"code"},model:{value:e.json,callback:function(t){e.json=t},expression:"json"}})],1)],1)}),o=[],c=n("5530"),d=n("3835"),u=(n("a434"),n("e9c4"),n("d81d"),n("45a3")),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"flex"}},[e.ruleObj.children.length>1?n("div",{staticClass:"relation-action hand",on:{click:function(t){return e.toggleThis(e.ruleObj)}}},[n("span",[e._v(e._s(e.relationMap[e.ruleObj.relation]))])]):e._e(),n("div",{staticStyle:{display:"flex","flex-direction":"column"}},[n("div",[e._v(e._s("["+e.ruleObj.level+"]-"+e.ruleObj.id))]),e._l(e.ruleObj.children,(function(t,l){return n("div",{key:t.id,staticStyle:{"margin-left":"12px"},attrs:{id:t.id}},[t.relation?e._e():n("div",{staticClass:"item-condition"},[n("el-form-item",[n("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",value:"["+t.level+"]-"+t.id}})],1),n("div",{staticClass:"item-action hand",on:{click:function(t){return e.addAfterThis(e.ruleObj,l)}}},[e._v(" ＋ ")]),0===e.ruleObj.level&&e.ruleObj.children.length>1||0!==e.ruleObj.level?n("div",{staticClass:"item-action hand",on:{click:function(t){return e.deleteThis(e.ruleObj,l)}}},[e._v(" - ")]):e._e(),0===e.ruleObj.level&&e.ruleObj.children.length>1||e.ruleObj.level>0?n("div",{staticClass:"item-action hand",on:{click:function(t){return e.addChild(e.ruleObj,l)}}},[e._v(" 子 ")]):e._e()],1),t.relation?n("FilterForm",{attrs:{ruleObj:t},on:{addItem:e.addAfterThis,deleteItem:e.deleteThis,addChildItem:e.addChild,toggleRelation:e.toggleThis}}):e._e()],1)}))],2)])},s=[],h={name:"FilterForm",props:{ruleObj:{type:Object,default:function(){return{level:0,relation:"and",children:[]}}},addItem:{type:Function,default:function(){}},deleteItem:{type:Function,default:function(){}},addChildItem:{type:Function,default:function(){}},toggleRelation:{type:Function,default:function(){}}},data:function(){return{relationMap:{and:"且",or:"或"}}},methods:{addAfterThis:function(e,t){this.$emit("addItem",e,t)},deleteThis:function(e,t){this.$emit("deleteItem",e,t)},addChild:function(e,t){this.$emit("addChildItem",e,t)},toggleThis:function(e){this.$emit("toggleRelation",e)}}},p=h,v=(n("c296"),n("2877")),m=Object(v["a"])(p,f,s,!1,null,null,null),b=m.exports,g=n("2909"),O=(n("ac1f"),n("5319"),n("d3b7"),n("25f0"),n("159b"),n("99af"),function(){return"xxxx-xxxx-xxxx-xxxx-xxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)}))}),j=function e(t){return t.map((function(t){return t.children?Object(c["a"])(Object(c["a"])({},t),{},{level:--t.level,children:e(t.children)}):(t.level--,t)}))},x=function(e,t){var n,l=function e(t,l){if(t.children)for(var i=0;i<t.children.length;i++)l===t.children[i].id?n=t:t.children[i].children&&e(t.children[i],l)};return l(e,t),n},y=function(e){var t=[],n=0;e.level=0,e.id="1001";var l=e.children;while(l.length>0)n+=1,Object(g["a"])(l).forEach((function(e,i){l.shift(),e.level=n,e.id=O(),1===n&&(t=t.concat([e])),e.children&&l.push.apply(l,Object(g["a"])(e.children))}));return Object(c["a"])(Object(c["a"])({},e),{},{children:t})},_={name:"App",components:{FilterForm:b,vueJsonEditor:u["a"]},data:function(){return{formData:{id:"1001",relation:"and",level:0,children:[{id:O(),level:1,left:"a",operator:">",right:"123"}]}}},computed:{json:function(){return this.formData}},created:function(){this.formData=y(this.formData)},methods:{addItem:function(e,t){var n=e.level,l={id:O(),left:"a",operator:">",right:"123",level:n+=1};e.children.splice(t+1,0,l),console.log(JSON.parse(JSON.stringify(this.formData)))},deleteItem:function(e,t){if(2===e.children.length&&0!==e.level){var n=x(this.formData,e.id),l=e.children;l.splice(t,1);var i,r=e.id,a=Object(d["a"])(e.children,1),o=a[0];if(o.children){var u=j(o.children);u=u.map((function(e){return Object(c["a"])({},e)})),i={id:r,level:e.level,relation:o.relation,children:u}}else i={id:r,left:o.left,right:o.right,operator:o.operator,level:e.level};n.children=n.children.map((function(e){return e.id===r?i:e}))}else e.children.splice(t,1);console.log(JSON.parse(JSON.stringify(this.formData)))},addChildItem:function(e,t){var n=e.children.splice(t,1),l=Object(d["a"])(n,1),i=l[0],r=i.level;i.level++;var a={id:O(),level:r,relation:"and",children:[]};a.children=[i,{id:O(),left:"a",operator:">",right:"123",level:i.level}],e.children.splice(t,0,a),console.log(JSON.parse(JSON.stringify(this.formData)))},toggleRelation:function(e){e.relation="and"===e.relation?"or":"and"}}},S=_,I=(n("034f"),Object(v["a"])(S,a,o,!1,null,null,null)),C=I.exports;l["default"].config.productionTip=!1,l["default"].use(r.a),new l["default"]({render:function(e){return e(C)}}).$mount("#app")},6215:function(e,t,n){},"85ec":function(e,t,n){},c296:function(e,t,n){"use strict";n("6215")}});
//# sourceMappingURL=app.06485d64.js.map